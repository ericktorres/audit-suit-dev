<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
    	<meta http-equiv="X-UA-Compatible" content="IE=edge">
    	<meta name="viewport" content="width=device-width, initial-scale=1">
		<title>Audit Suit - Users</title>
		<link href="css/bootstrap.min.css" rel="stylesheet">
		<link href="css/app.css" rel="stylesheet">
		<link href="css/users.css" rel="stylesheet">
	</head>
	<body>
		<nav class="navbar navbar-inverse navbar-fixed-top">
			<div class="container">
				<div class="navbar-header">
					<button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
			            <span class="sr-only">Toggle navigation</span>
			            <span class="icon-bar"></span>
			            <span class="icon-bar"></span>
			            <span class="icon-bar"></span>			            
          			</button>
					<a id="logo_container" class="navbar-brand" href="#"></a>
				</div>
				<div id="navbar" class="collapse navbar-collapse">
          			<ul class="nav navbar-nav" id="ul_menu">
            		</ul>
            		<ul class="nav navbar-nav navbar-right">
            			<li class="dropdown">
              				<a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false"><span id="lbl_user_name"></span> <span class="caret"></span></a>
              				<ul class="dropdown-menu">
                                <li><a href="change-password.html">Cambiar contraseña</a></li>
                				<li><a href="javascript:logout();">Cerrar sesión</a></li>
                			</ul>
            			</li>
            		</ul>
          			
        		</div><!--/.nav-collapse -->
			</div>
		</nav>

		<!-- body -->
		<div class="container fifty-top">
			<div class="page-header">
  				<button type="button" class="btn btn-primary" aria-label="Left Align" onclick="openCreateUser();"><span class="glyphicon glyphicon-plus" aria-hidden="true"></span> Crear Usuario</button>
  				<button type="button" class="btn btn-secondary" aria-label="Left Align" onclick="javascript:location.reload();"><span class="glyphicon glyphicon-refresh" aria-hidden="true"></span> Actualizar</button>
			</div>

			<div class="table-responsive">
				<table class="table table-striped">
					<thead>
                		<tr>
                  			<th>#</th>
                  			<th>NOMBRE</th>
                  			<th>APELLIDO PATERNO</th>
                  			<th>CORREO ELECTRÓNICO</th>
                  			<th>PRIVILEGIOS</th>
                  			<th>TIPO</th>
                  			<th></th>
                		</tr>
              		</thead>
              		<tbody id="tbody_users">
              		</tbody>
				</table>
			</div>
		</div>

        <!-- Modal create user -->
        <div class="modal fade" id="user-create" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
            <div class="modal-dialog" role="document">
                <div class="modal-content">
                    <div class="modal-header">
                        <h3 class="modal-title" id="exampleModalLabel">Crear Usuario</h3>
                    </div>
                    <div class="modal-body">
                        
                        <div id="alert-users-create" class="alert alert-success alert-dismissible alert-hide" role="alert">
                            <button type="button" class="close" data-dismiss="alert" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                            <div id="alert-message"></div>
                        </div>

                        <form id="frm-create-user">
                            <table class="form-tbl">
                                <tr>
                                    <td>ID</td>
                                    <td><input type="text" id="txt_id_create" class="form-control" disabled="true" placeholder="ID de usuario" required autofocus></td>
                                </tr>
                                <tr>
                                    <td>TIPO</td>
                                    <td>
                                        <select class="form-control" id="slc_type_create" onchange="enableCompanies(1);" required>
                                            <option value="1">Interno</option>
                                            <option value="2">Externo</option>                                            
                                        </select>
                                    </td>
                                </tr>
                                <tr>
                                    <td>EMPRESA</td>
                                    <td><select class="form-control" id="slc_company_create" required></select></td>
                                </tr>
                                <tr>
                                    <td>PRIVILEGIOS</td>
                                    <td>
                                        <select class="form-control" id="slc_privileges_create" required>
                                            <option value="">Seleccione privilegios</option>
                                            <option value="1">Administrador</option>
                                            <option value="2">Gerente</option>
                                            <option value="3">Auditor</option>
                                        </select>
                                    </td>
                                </tr>
                                <tr>
                                    <td>ES GERENTE REGIONAL</td>
                                    <td>
                                        <select class="form-control" id="slc_is_regional_create">
                                            <option value="0">NO</option>
                                            <option value="1">SI</option>
                                        </select>
                                    </td>
                                </tr>
                                <tr>
                                    <td>NOMBRE</td>
                                    <td><input type="text" id="txt_name_create" class="form-control" placeholder="Nombre" required></td>
                                </tr>
                                <tr>
                                    <td>APELLIDO PATERNO</td>
                                    <td><input type="text" id="txt_lastname_create" class="form-control" placeholder="Apellido Paterno" required></td>
                                </tr>
                                <tr>
                                    <td>APELLIDO MATERNO</td>
                                    <td><input type="text" id="txt_second_lastname_create" class="form-control" placeholder="Apellido Materno" required></td>
                                </tr>
                                <tr>
                                    <td>NOMBRE DE USUARIO</td>
                                    <td><input type="text" id="txt_username_create" class="form-control" placeholder="Nombre de usuario" required></td>
                                </tr>
                                <tr>
                                    <td>CORREO ELECTRÓNICO</td>
                                    <td><input type="text" id="txt_email_create" class="form-control" placeholder="Correo electrónico" required></td>
                                </tr>
                                <tr>
                                    <td>CONTRASEÑA</td>
                                    <td><input type="password" id="txt_password_create" class="form-control" placeholder="Contraseña" required></td>
                                </tr>
                                <tr>
                                    <td>ESTADO</td>
                                    <td>
                                        <select class="form-control" id="slc_status_create" required>
                                            <option value="1">Activo</option>
                                            <option value="0">Inactivo</option>
                                        </select>
                                    </td>
                                </tr>
                                <tr>
                                    <td>REVISOR</td>
                                    <td>
                                        <select class="form-control" id="slc_reviser_create" required>
                                            <option value="0">NO</option>
                                            <option value="1">SI</option>
                                        </select>
                                    </td>
                                </tr>                                
                            </table>
                        </form>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-primary" onclick="createUser();"><span class="glyphicon glyphicon-floppy-disk" aria-hidden="true"></span> Crear Usuario</button>
                        <button type="button" class="btn btn-secondary" data-dismiss="modal"><span class="glyphicon glyphicon-eye-close" aria-hidden="true"></span> Cancelar</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Modal edit user -->
        <div class="modal fade" id="user-actions" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
            <div class="modal-dialog" role="document">
                <div class="modal-content">
                    <div class="modal-header">
                        <h3 class="modal-title" id="exampleModalLabel">Modificar Usuario</h3>
                    </div>
                    <div class="modal-body">
                        
                        <div id="alert-users" class="alert alert-success alert-dismissible alert-hide" role="alert">
                            <button type="button" class="close" data-dismiss="alert" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                            <div id="alert-message"></div>
                        </div>

                        <form id="frm-edit-user">
                            <table class="form-tbl">
                                <tr>
                                    <td>ID</td>
                                    <td><input type="text" id="txt_id_edit" class="form-control" disabled="true" placeholder="ID de usuario" required autofocus></td>
                                </tr>
                                <tr>
                                    <td>TIPO</td>
                                    <td>
                                        <select class="form-control" id="slc_type_edit" onchange="enableCompanies(2);" required>
                                            <option value="1">Interno</option>
                                            <option value="2">Externo</option>                                            
                                        </select>
                                    </td>
                                </tr>
                                <tr>
                                    <td>EMPRESA</td>
                                    <td><select class="form-control" id="slc_company_edit" required></select></td>
                                </tr>
                                <tr>
                                    <td>PRIVILEGIOS</td>
                                    <td>
                                        <select class="form-control" id="slc_privileges_edit" required>
                                            <option value="">Seleccione privilegios</option>
                                            <option value="1">Administrador</option>
                                            <option value="2">Gerente</option>
                                            <option value="3">Auditor</option>
                                        </select>
                                    </td>
                                </tr>
                                <tr>
                                    <td>ES GERENTE REGIONAL</td>
                                    <td>
                                        <select class="form-control" id="slc_is_regional_edit">
                                            <option value="0">NO</option>
                                            <option value="1">SI</option>
                                        </select>
                                    </td>
                                </tr>
                                <tr>
                                    <td>NOMBRE</td>
                                    <td><input type="text" id="txt_name_edit" class="form-control" placeholder="Nombre" required></td>
                                </tr>
                                <tr>
                                    <td>APELLIDO PATERNO</td>
                                    <td><input type="text" id="txt_lastname_edit" class="form-control" placeholder="Apellido Paterno" required></td>
                                </tr>
                                <tr>
                                    <td>APELLIDO MATERNO</td>
                                    <td><input type="text" id="txt_second_lastname_edit" class="form-control" placeholder="Apellido Materno" required></td>
                                </tr>
                                <tr>
                                    <td>NOMBRE DE USUARIO</td>
                                    <td><input type="text" id="txt_username_edit" class="form-control" placeholder="Nombre de usuario" required></td>
                                </tr>
                                <tr>
                                    <td>CORREO ELECTRÓNICO</td>
                                    <td><input type="text" id="txt_email_edit" class="form-control" placeholder="Correo electrónico" required></td>
                                </tr>
                                <!--<tr>
                                    <td>CONTRASEÑA</td>
                                    <td><input type="password" id="txt_password_edit" class="form-control" placeholder="Contraseña" required></td>
                                </tr>-->
                                <tr>
                                    <td>ESTADO</td>
                                    <td>
                                        <select class="form-control" id="slc_status_edit" required>
                                            <option value="1">Activo</option>
                                            <option value="0">Inactivo</option>
                                        </select>
                                    </td>
                                </tr>
                                <tr>
                                    <td>REVISOR</td>
                                    <td>
                                        <select class="form-control" id="slc_reviser_edit" required>
                                            <option value="0">NO</option>
                                            <option value="1">SI</option>
                                        </select>
                                    </td>
                                </tr>
                            </table>
                        </form>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-primary" onclick="editUser();"><span class="glyphicon glyphicon-floppy-disk" aria-hidden="true"></span> Guardar Cambios</button>
                        <button type="button" class="btn btn-secondary" data-dismiss="modal"><span class="glyphicon glyphicon-eye-close" aria-hidden="true"></span> Cancelar</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Modal add users -->
        <div class="modal fade" id="add-users" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
            <div class="modal-dialog" role="document">
                <div class="modal-content">
                    <div class="modal-header">
                        <h3 class="modal-title" id="exampleModalLabel">Asignar Usuarios</h3>
                    </div>
                    <div class="modal-body">
                        
                        <div id="alert-users-add" class="alert alert-success alert-dismissible alert-hide" role="alert">
                            <button type="button" class="close" data-dismiss="alert" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                            <div id="alert-message-add"></div>
                        </div>

                        <div class="table-responsive">
                            <table class="table table-striped">
                                <thead>
                                    <tr>
                                        <th>No</th>
                                        <th>PRIVILEGIOS</th>
                                        <th>NOMBRE</th>
                                        <th>APELLIDO</th>
                                        <th></th>
                                    </tr>
                                </thead>
                                <tbody id="tbody_add_users">
                                </tbody>
                            </table>
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-dismiss="modal"><span class="glyphicon glyphicon-eye-close" aria-hidden="true"></span> Cancelar</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Modal add clients, plants and suppliers -->
        <div class="modal fade" id="add-clients-plants" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
            <div class="modal-dialog" role="document">
                <div class="modal-content">
                    <div class="modal-header">
                        <h3 class="modal-title" id="exampleModalLabel">Asignar Clientes</h3>
                    </div>
                    <div class="modal-body">
                        
                        <div id="alert-clients-plants" class="alert alert-success alert-dismissible alert-hide" role="alert">
                            <button type="button" class="close" data-dismiss="alert" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                            <div id="alert-message-clients-plants"></div>
                        </div>

                        <div class="table-responsive">
                            <table class="table table-striped">
                                <thead>
                                    <tr>
                                        <th>No</th>
                                        <th>NOMBRE</th>
                                        <th>RAZÓN SOCIAL</th>
                                        <th>TIPO</th>
                                        <th></th>
                                    </tr>
                                </thead>
                                <tbody id="tbody_add_clients">
                                </tbody>
                            </table>
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-dismiss="modal"><span class="glyphicon glyphicon-eye-close" aria-hidden="true"></span> Cancelar</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Modal add clients to auditors -->
        <div class="modal fade" id="add-clients-to-auditors" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
            <div class="modal-dialog" role="document">
                <div class="modal-content">
                    <div class="modal-header">
                        <h3 class="modal-title" id="exampleModalLabel">Asignar Auditorías</h3>
                    </div>
                    <div class="modal-body">
                        
                        <div id="alert-clients-auditors" class="alert alert-success alert-dismissible alert-hide" role="alert">
                            <button type="button" class="close" data-dismiss="alert" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                            <div id="alert-message-clients-auditors"></div>
                        </div>

                        <div class="table-responsive">
                            <table class="table table-striped">
                                <thead>
                                    <tr>
                                        <th>No</th>
                                        <th>NOMBRE COMERCIAL</th>
                                        <th></th>
                                    </tr>
                                </thead>
                                <tbody id="tbody_add_clients_auditors">
                                </tbody>
                            </table>
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-dismiss="modal"><span class="glyphicon glyphicon-eye-close" aria-hidden="true"></span> Cancelar</button>
                    </div>
                </div>
            </div>
        </div>

		<script src="js/jquery-1.12.4.min.js"></script>
    	<script src="js/bootstrap.min.js"></script>
    	<script src="js/users.js"></script>
    	<script src="js/app.js"></script>
    	<script>
			$(document).ready(function(){
				setSessionData();

                getUsers();

                onInit();

                setMenu('', '', ' class="active"', '', '', '', '');

                loadLogo();
			});
		</script>
	</body>
</html>