<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Audit Suit - Report</title>
	<link href="css/bootstrap.min.css" rel="stylesheet">
	<link href="css/app.css" rel="stylesheet">
	<link href="css/questionnaires.css" rel="stylesheet">
	<script src="js/Chart.bundle.js"></script>
</head>
<body id="target">
	<input type="hidden" id="hdn_report_id" value="">
	<input type="hidden" id="hdn_report_id_date" value="">
	<nav class="navbar navbar-inverse navbar-fixed-top">
		<div class="container">
			<div class="navbar-header">
				<button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
					<span class="sr-only">Toggle navigation</span>
					<span class="icon-bar"></span>
					<span class="icon-bar"></span>
					<span class="icon-bar"></span>                  
				</button>
				<a id="logo_container" class="navbar-brand" href="#"></a>
			</div>
			<div id="navbar" class="collapse navbar-collapse">
				<ul class="nav navbar-nav" id="ul_menu">
				</ul>
				<ul class="nav navbar-nav navbar-right">
					<li class="dropdown">
						<a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false"><span id="lbl_user_name"></span> <span class="caret"></span></a>
						<ul class="dropdown-menu">
							<li><a href="change-password.html">Cambiar contraseña</a></li>
							<li><a href="javascript:logout();">Cerrar sesión</a></li>
						</ul>
					</li>
				</ul>

			</div><!--/.nav-collapse -->
		</div>
	</nav>

	<!-- body -->
	<div class="container fifty-top">
		<div class="page-header">
			<button type="button" class="btn btn-default" onclick="backToReports();"><span class="glyphicon glyphicon-chevron-left"></span> Regresar</button>
			<!--<button type="button" class="btn btn-info" aria-label="Left Align" onclick="downloadReport();"><span class="glyphicon glyphicon-save" aria-hidden="true"></span> Descargar</button>-->

			<button id="btn_send_to_review" type="button" class="btn btn-warning" aria-label="Left Align" onclick="reviewReport();" dissabled><span class="glyphicon glyphicon-ok" aria-hidden="true"></span> Revisar</button>
			<button id="btn_approves" type="button" class="btn btn-primary" aria-label="Left Align" onclick="approveReport();" dissabled><span class="glyphicon glyphicon-thumbs-up" aria-hidden="true"></span> Aprobar</button>
			<button id="btn_release_report" type="button" class="btn btn-success" aria-label="Left Align" onclick="releaseReport();" dissabled><span class="glyphicon glyphicon-send" aria-hidden="true"></span> Liberar</button>
			<button id="btn_export_pdf" type="button" class="btn btn-default" aria-label="Left Align" onclick="exportToPDF();" dissabled><span class="glyphicon glyphicon-save-file" aria-hidden="true"></span> Exportar PDF</button>
		</div>

		<div id="pdf-content">

			<div class="panel panel-default">
				<div class="panel-heading">
					<h3 class="panel-title">Reporte No: <span id="sp_report_number"></span></h3>
				</div>

				<div class="panel-body">
					<table width="100%">
						<tr>
							<td><b>CLIENTE:</b></td>
							<td><span id="sp_client"></span></td>
							<td><b>SUCURSAL:</b></td>
							<td><span id="sp_branch"></span></td>
						</tr>
						<tr>
							<td><b>CUESTIONARIO:</b></td>
							<td><span id="sp_questionnaire"></span></td>
							<td><b>CÓDIGO:</b></td>
							<td><span id="sp_questionnaire_code"></span></td>
						</tr>
						<tr>
							<td><b>AUDITOR:</b></td>
							<td><span id="sp_auditor"></span></td>
							<td><b>FECHA AUDITORÍA:</b></td>
							<td id="td-audit-date">
								<input type="text" id="txt_audit_date" class="form-control" placeholder="YYYY-mm-dd" onblur="assignAuditDate();">
							</td>
						</tr>
						<tr>
							<td><b>FECHA Y HORA DE INICIO:</b></td>
							<td colspan="3"><span id="start_date"></span></td>              
						</tr>
						<tr>
							<td><b>FECHA Y HORA DE FINALIZACIÓN:</b></td>
							<td colspan="3"><span id="end_date"></span></td>              
						</tr>
					</table>
				</div>
			</div>

			<div class="panel panel-default">
				<div class="panel-heading">
					<h3 class="panel-title">Resultado total: <span id="span_total_percentage"></span> de 100%.</h3>
				</div>
			</div>

			<div class="page-break panel panel-default">
				<div class="panel-heading">
					<h3 class="panel-title">Gráfica de resultados</h3>
				</div>
				<div class="panel-body text-center" id="canvas-panel">
					<canvas id="results-by-section" width="400" height="300"></canvas>
				</div>
			</div>

			<div class="page-break panel panel-default">
				<div class="panel-heading">
					<h3 class="panel-title">Resultados por sección</h3>
				</div>

				<div class="panel-body">
					<table class="table">
						<thead>
							<tr>
								<th>No</th>
								<th>SECCIÓN</th>
								<th>RESULTADO</th>
							</tr>    
						</thead>
						<tbody id="tbody_sections_result"></tbody>
					</table>
				</div>
			</div>

			<div class="page-break panel panel-default">
				<div class="panel-heading">
					<h3 class="panel-title">
						<a data-toggle="collapse" href="#collapse1">Preguntas respondidas</a>
					</h3>
				</div>

				<div id="collapse1" class="panel-collapse collapse">
					<div class="panel-body">
						<table class="table">
							<thead>
								<tr>
									<th>SECCIÓN</th>
									<th>PREGUNTA</th>
									<th>RESPUESTA</th>
									<th>PUNTAJE</th>
									<th class="print-hide">EDITAR</th>
								</tr>
							</thead>
							<tbody id="tbody_report_questions"></tbody>
						</table>
					</div>
				</div>
			</div>

			<div class="panel panel-default">
				<div class="panel-heading">
					<h3 class="panel-title">
						<a data-toggle="collapse" href="#collapse2">Áreas de oportunidad</a>
					</h3>
				</div>

				<div id="collapse2" class="panel-collapse collapse">
					<div class="panel-body">
						<table class="table">
							<thead>
								<tr>
									<th>SECCIÓN</th>
									<th>PREGUNTA</th>
									<th>RESPUESTA</th>
									<th>PUNTAJE</th>
									<!--<th>OBSERVACIONES</th>-->
								</tr>
							</thead>
							<tbody id="tbody_opportunity"></tbody>
						</table>
					</div>
				</div>
			</div>

		</div>
		<!-- Modal edit answer -->
		<div class="modal fade" id="edit-answer" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
			<div class="modal-dialog" role="document">
				<div class="modal-content">
					<div class="modal-header">
						<h3 class="modal-title" id="exampleModalLabel">Modificar Respuesta</h3>
					</div>
					<div class="modal-body">

						<div id="alert-edit-answer" class="alert alert-success alert-dismissible alert-hide" role="alert">
							<button type="button" class="close" data-dismiss="alert" aria-label="Close"><span aria-hidden="true">&times;</span></button>
							<div id="alert-message"></div>
						</div>

						<form id="frm-edit-answer">
							<table class="form-tbl">
								<tr>
									<td>ID RESPUESTA</td>
									<td><input type="text" id="txt_answer_id" class="form-control" disabled="true">
										<input type="hidden" id="hdn_question_max_value">
									</td>
								</tr>
								<tr>
									<td>SECCIÓN</td>
									<td><input type="text" id="txt_section" class="form-control" disabled="true"></td>
								</tr>
								<tr>
									<td>PREGUNTA</td>
									<td><input type="text" id="txt_question" class="form-control" disabled="true"></td>
								</tr>
								<tr>
									<td>RESPUESTA</td>
									<td>
										<select class="form-control" id="slc_answer" onchange="editAnswerValue();"></select>
									</td>
								</tr>
								<tr>
									<td>PUNTAJE</td>
									<td><input type="text" class="form-control" id="txt_value" disabled></td>
								</tr>
								<tr>
									<td>OBSERVACIONES</td>
									<td><textarea class="form-control" id="txa_observations" rows="5"></textarea></td>
								</tr>
								<tr>
									<td>NO CONFORMIDAD</td>
									<td><textarea class="form-control" id="txa_nonconformity" rows="5"></textarea></td>
								</tr>
								<tr>
									<td>NO APLICA</td>
									<td><input type="checkbox" id="chk_notapply"></td>
								</tr>
							</table>
						</form>
					</div>
					<div class="modal-footer">
						<button type="button" class="btn btn-primary" onclick="editQuestionAnswer();"><span class="glyphicon glyphicon-floppy-disk" aria-hidden="true"></span> Modificar Respuesta</button>
						<button type="button" class="btn btn-secondary" data-dismiss="modal"><span class="glyphicon glyphicon-eye-close" aria-hidden="true"></span> Cancelar</button>
					</div>
				</div>
			</div>
		</div>

	</div>

	<script src="js/jquery-1.12.4.min.js"></script>
	<script src="js/bootstrap.min.js"></script>

	<!--<script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.4.0/Chart.min.js"></script>-->
	<script src="js/location.js"></script>
	<script src="js/report.js"></script>
	<script src="js/app.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/1.3.2/jspdf.debug.js"></script>
	<script>
		$(document).ready(function(){
			setSessionData();
			setMenu('', '', '', '', ' class="active"', '');
			getGeneralData();
			getResultsBySection(1);
			getReportQuestions();
			getOpportunityAreas();
			manageReleaseButtons();
			reportOpened();
			manageReportActions();
			loadLogo();
			setTimeout(function(){ saveReportData() }, 2000);
		});
	</script>
</body>
</html>